"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("Chufaba",["ionic","ngCordova","myRouter","starter.controllers","starter.services"]).run(["$ionicPlatform",function(t){t.ready(function(){setTimeout(function(){navigator.splashscreen&&navigator.splashscreen.hide()},1500),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&(StatusBar.styleLightContent(),StatusBar.backgroundColorByHexString("#21272f"))})}]).config(["$ionicConfigProvider",function(t){t.platform.ios.tabs.style("standard"),t.platform.ios.tabs.position("bottom"),t.platform.android.tabs.style("standard"),t.platform.android.tabs.position("bottom"),t.platform.ios.navBar.alignTitle("center"),t.platform.android.navBar.alignTitle("left"),t.platform.ios.views.transition("ios"),t.platform.android.views.transition("android"),t.backButton.previousTitleText(!1),t.backButton.text(" ")}]);var Config=function t(e){var o=e.host,a=void 0===o?"127.0.0.1":o,r=e.port,i=void 0===r?"3000":r,n=e.ssl,s=void 0!==n&&n,l=e.activityPoster,c=void 0===l?"/img/default.jpg":l;_classCallCheck(this,t),this.host=a,this.port=i,this.protocol=s?"https":"http",this.serverUrl=this.protocol+"://"+this.host+":"+this.port,this.activityPoster=c},activityPoster="http://img.chufaba.me/events/e3d11e3218c1a9102a0848ff54ad4a17n.jpg",config=new Config({activityPoster:activityPoster});angular.module("Chufaba").filter("imageSize",function(){return function(t){return t.replace("!320","!375")}}).filter("avatar",function(){return function(t){var e=/(jpg|png)$/;return t&&e.test(t)||(t="http://cfbassets.b0.upaiyun.com/assets/v2/head.png"),t}}).filter("pointer",function(){return function(t){return"— · "+t.replace(/(、)/g," · ")+" · —"}}),angular.module("myRouter",["ionic"]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("guide",{url:"/guide",templateUrl:"views/guide/guide.html",controller:"guideController"}).state("tab",{url:"/tab",abstract:!0,templateUrl:"views/tabs.html",controller:"TabsController"}).state("tab.home",{url:"/home",views:{"tab-home":{templateUrl:"views/tabs/tab-home.html",controller:"HomeController"}}}).state("tab.good-detail",{url:"/good-detail:id",views:{"tab-home":{templateUrl:"views/detail/good.html",controller:"GoodDetailController"}}}).state("tab.chats",{url:"/chats",views:{"tab-chats":{templateUrl:"views/tab-chats.html",controller:"ChatsCtrl"}}}).state("tab.chat-detail",{url:"/chats/:chatId",views:{"tab-chats":{templateUrl:"views/chat-detail.html",controller:"ChatDetailCtrl"}}}).state("tab.account",{url:"/account",views:{"tab-account":{templateUrl:"views/tab-account.html",controller:"AccountCtrl"}}}),e.otherwise(localStorage.guided?"/tab/home":"/guide")}]),angular.module("Chufaba").controller("GoodDetailController",["$scope","$rootScope","$stateParams",function(t,e,o){console.log(t),e.transparentBar=!0}]),angular.module("Chufaba").controller("guideController",["$scope","$ionicPlatform","$state","$timeout",function(t,e,o,a){t.index=0,t.slideStatus=[!0,!1,!1],t.delay=!0,t.changeBC=function(e){t.index=e,t.delay=!1,t.slideStatus[e]=!0},t.go=function(){t.out=!0,a(function(){o.go("tab.home")},1e3)}}]);var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,o,a){return o&&t(e.prototype,o),a&&t(e,a),e}}();angular.module("Chufaba").controller("HomeController",["$scope","$ionicSlideBoxDelegate","$cordovaToast","$http","$state",function(t,e,o,a,r){var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.activeItem=e}return _createClass(t,[{key:"setActive",value:function(t){this.activeItem=t,e.slide(this.activeItem)}}]),t}();t.homeTab=new i(1);var n=function(){function e(t){var o=t.path,a=void 0===o?"/product":o,r=t.current,i=void 0===r?0:r,n=t.offset,s=void 0===n?10:n,l=t.showInfinite,c=void 0===l||l,u=t.loadData;_classCallCheck(this,e),this.path=a,this.current=i,this.offset=s,this.showInfinite=c,this.loadData=u,this.data={items:[]}}return _createClass(e,[{key:"refresh",value:function(){var e=this;this.showInfinite=!0,this.current=0,this.data.items=[],setTimeout(function(){e.loadData(),t.$broadcast("scroll.refreshComplete")},1e3)}},{key:"infinite",value:function(){var t=this;setTimeout(function(){t.loadData()},500)}}]),e}();t.good=new n({path:"/product/good",loadData:function(){var e=this;a({method:"GET",url:config.serverUrl+this.path,params:{current:this.current,offset:this.offset}}).then(function(a){a.data.code&&a.data.items.length>0?(e.data.items=e.data.items.concat(a.data.items),e.current+=e.offset):a.data.code&&0===a.data.items.length?(e.showInfinite=!1,o.showShortCenter("没有更多数据了!")):o.showShortCenter("数据请求失败，请尝试下拉刷新"),t.$broadcast("scroll.infiniteScrollComplete")}).catch(function(t){o.showShortCenter("数据请求失败，请检查网络")})}}),t.good.data.banner={image:config.activityPoster},t.good.goDetail=function(t){r.go("good-detail")}}]).service("HomeService",[]),angular.module("Chufaba").controller("TabsController",["$scope","$rootScope","$ionicTabsDelegate",function(t,e,o){var a=void 0;e.$on("$ionicView.beforeEnter",function(t,e){a=e.stateName;var r="tab.home"==a||"tab.user"==a;o.showBar(r)}),e.$on("$ionicView.beforeLeave",function(t,e){})}]);
//# sourceMappingURL=ionic.app.min.js.map
