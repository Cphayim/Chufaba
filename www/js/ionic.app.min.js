"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MD5(t){function e(t){return a(o(n(t)))}function o(t){return i(l(r(t),8*t.length))}function a(t){for(var e,o=m?"0123456789ABCDEF":"0123456789abcdef",a="",n=0;n<t.length;n++)e=t.charCodeAt(n),a+=o.charAt(e>>>4&15)+o.charAt(15&e);return a}function n(t){for(var e,o,a="",n=-1;++n<t.length;)e=t.charCodeAt(n),o=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&e<=56319&&56320<=o&&o<=57343&&(e=65536+((1023&e)<<10)+(1023&o),n++),e<=127?a+=String.fromCharCode(e):e<=2047?a+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?a+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(a+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return a}function r(t){for(var e=Array(t.length>>2),o=0;o<e.length;o++)e[o]=0;for(var o=0;o<8*t.length;o+=8)e[o>>5]|=(255&t.charCodeAt(o/8))<<o%32;return e}function i(t){for(var e="",o=0;o<32*t.length;o+=8)e+=String.fromCharCode(t[o>>5]>>>o%32&255);return e}function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var o=1732584193,a=-271733879,n=-1732584194,r=271733878,i=0;i<t.length;i+=16){var l=o,s=a,b=n,m=r;o=c(o,a,n,r,t[i+0],7,-680876936),r=c(r,o,a,n,t[i+1],12,-389564586),n=c(n,r,o,a,t[i+2],17,606105819),a=c(a,n,r,o,t[i+3],22,-1044525330),o=c(o,a,n,r,t[i+4],7,-176418897),r=c(r,o,a,n,t[i+5],12,1200080426),n=c(n,r,o,a,t[i+6],17,-1473231341),a=c(a,n,r,o,t[i+7],22,-45705983),o=c(o,a,n,r,t[i+8],7,1770035416),r=c(r,o,a,n,t[i+9],12,-1958414417),n=c(n,r,o,a,t[i+10],17,-42063),a=c(a,n,r,o,t[i+11],22,-1990404162),o=c(o,a,n,r,t[i+12],7,1804603682),r=c(r,o,a,n,t[i+13],12,-40341101),n=c(n,r,o,a,t[i+14],17,-1502002290),a=c(a,n,r,o,t[i+15],22,1236535329),o=u(o,a,n,r,t[i+1],5,-165796510),r=u(r,o,a,n,t[i+6],9,-1069501632),n=u(n,r,o,a,t[i+11],14,643717713),a=u(a,n,r,o,t[i+0],20,-373897302),o=u(o,a,n,r,t[i+5],5,-701558691),r=u(r,o,a,n,t[i+10],9,38016083),n=u(n,r,o,a,t[i+15],14,-660478335),a=u(a,n,r,o,t[i+4],20,-405537848),o=u(o,a,n,r,t[i+9],5,568446438),r=u(r,o,a,n,t[i+14],9,-1019803690),n=u(n,r,o,a,t[i+3],14,-187363961),a=u(a,n,r,o,t[i+8],20,1163531501),o=u(o,a,n,r,t[i+13],5,-1444681467),r=u(r,o,a,n,t[i+2],9,-51403784),n=u(n,r,o,a,t[i+7],14,1735328473),a=u(a,n,r,o,t[i+12],20,-1926607734),o=d(o,a,n,r,t[i+5],4,-378558),r=d(r,o,a,n,t[i+8],11,-2022574463),n=d(n,r,o,a,t[i+11],16,1839030562),a=d(a,n,r,o,t[i+14],23,-35309556),o=d(o,a,n,r,t[i+1],4,-1530992060),r=d(r,o,a,n,t[i+4],11,1272893353),n=d(n,r,o,a,t[i+7],16,-155497632),a=d(a,n,r,o,t[i+10],23,-1094730640),o=d(o,a,n,r,t[i+13],4,681279174),r=d(r,o,a,n,t[i+0],11,-358537222),n=d(n,r,o,a,t[i+3],16,-722521979),a=d(a,n,r,o,t[i+6],23,76029189),o=d(o,a,n,r,t[i+9],4,-640364487),r=d(r,o,a,n,t[i+12],11,-421815835),n=d(n,r,o,a,t[i+15],16,530742520),a=d(a,n,r,o,t[i+2],23,-995338651),o=f(o,a,n,r,t[i+0],6,-198630844),r=f(r,o,a,n,t[i+7],10,1126891415),n=f(n,r,o,a,t[i+14],15,-1416354905),a=f(a,n,r,o,t[i+5],21,-57434055),o=f(o,a,n,r,t[i+12],6,1700485571),r=f(r,o,a,n,t[i+3],10,-1894986606),n=f(n,r,o,a,t[i+10],15,-1051523),a=f(a,n,r,o,t[i+1],21,-2054922799),o=f(o,a,n,r,t[i+8],6,1873313359),r=f(r,o,a,n,t[i+15],10,-30611744),n=f(n,r,o,a,t[i+6],15,-1560198380),a=f(a,n,r,o,t[i+13],21,1309151649),o=f(o,a,n,r,t[i+4],6,-145523070),r=f(r,o,a,n,t[i+11],10,-1120210379),n=f(n,r,o,a,t[i+2],15,718787259),a=f(a,n,r,o,t[i+9],21,-343485551),o=h(o,l),a=h(a,s),n=h(n,b),r=h(r,m)}return Array(o,a,n,r)}function s(t,e,o,a,n,r){return h(b(h(h(e,t),h(a,r)),n),o)}function c(t,e,o,a,n,r,i){return s(e&o|~e&a,t,e,n,r,i)}function u(t,e,o,a,n,r,i){return s(e&a|o&~a,t,e,n,r,i)}function d(t,e,o,a,n,r,i){return s(e^o^a,t,e,n,r,i)}function f(t,e,o,a,n,r,i){return s(o^(e|~a),t,e,n,r,i)}function h(t,e){var o=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(o>>16)<<16|65535&o}function b(t,e){return t<<e|t>>>32-e}var m=0;return e(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("Chufaba",["ionic","ngCordova","myRouter"]).run(["$ionicPlatform",function(t){t.ready(function(){setTimeout(function(){navigator.splashscreen&&navigator.splashscreen.hide()},1500),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&(StatusBar.styleLightContent(),StatusBar.backgroundColorByHexString("#21272f"))})}]).config(["$ionicConfigProvider",function(t){t.platform.ios.tabs.style("standard"),t.platform.ios.tabs.position("bottom"),t.platform.android.tabs.style("standard"),t.platform.android.tabs.position("bottom"),t.platform.ios.navBar.alignTitle("center"),t.platform.android.navBar.alignTitle("left"),t.platform.ios.views.transition("ios"),t.platform.android.views.transition("android"),t.backButton.previousTitleText(!1),t.backButton.text(" ")}]).constant("$ionicLoadingConfig",{template:'<ion-spinner icon="lines" class="spinner-balanced"></ion-spinner><p>正在加载</p>'});var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,o,a){return o&&t(e.prototype,o),a&&t(e,a),e}}(),RefreshComponent=function(){function t(e){var o=e.scope,a=void 0===o?null:o,n=e.path,r=void 0===n?"/product":n,i=e.current,l=void 0===i?0:i,s=e.offset,c=void 0===s?10:s,u=e.hasInfinite,d=void 0===u||u,f=e.data,h=void 0===f?{}:f,b=e.reset,m=void 0===b?function(){}:b,v=e.loadData,g=void 0===v?function(){}:v;_classCallCheck(this,t),this.scope=a,this.path=r,this.current=l,this.offset=c,this.hasInfinite=d,this.showInfinite=!!this.hasInfinite,this.data=h,this.reset=m,this.loadData=g}return _createClass(t,[{key:"refresh",value:function(){var t=this;this.hasInfinite&&(this.showInfinite=!0),this.current=0,this.reset(),setTimeout(function(e){t.loadData(),t.scope.$broadcast("scroll.refreshComplete")},1e3)}},{key:"infinite",value:function(){var t=this;setTimeout(function(e){t.loadData()},500)}}]),t}(),Config=function t(e){var o=e.host,a=void 0===o?"127.0.0.1":o,n=e.port,r=void 0===n?"3000":n,i=e.ssl,l=void 0!==i&&i,s=e.activityPoster,c=void 0===s?"/img/default.jpg":s;_classCallCheck(this,t),this.host=a,this.port=r,this.protocol=l?"https":"http",this.serverUrl=this.protocol+"://"+this.host+":"+this.port,this.activityPoster=c},activityPoster="http://img.chufaba.me/events/e3d11e3218c1a9102a0848ff54ad4a17n.jpg",config=new Config({host:"192.168.31.59",activityPoster:activityPoster});angular.module("Chufaba").directive("hideTabs",function(t){return{restrict:"A",link:function(e,o,a){e.$on("$ionicView.beforeEnter",function(){e.$watch(a.hideTabs,function(e){t.hideTabs="tabs-item-hide"})}),e.$on("$ionicView.beforeLeave",function(){e.$watch(a.hideTabs,function(e){t.hideTabs="tabs-item-hide"}),e.$watch("$destroy",function(){t.hideTabs=!1})})}}}),angular.module("Chufaba").filter("imageSize",function(){return function(t){return t.replace("!320","!375")}}).filter("avatar",function(){return function(t){var e=/(jpg|png)$/;return t&&e.test(t)||(t="http://cfbassets.b0.upaiyun.com/assets/v2/head.png"),t}}).filter("pointer",function(){return function(t){return"— · "+t.replace(/(、)/g," · ")+" · —"}}).filter("date",function(){return function(t,e){var o=new Date(t);o.setDate(o.getDate()+e);var a=o.getDay(),n="";switch(a){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()+"，"+n}}),angular.module("myRouter",["ionic"]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("guide",{url:"/guide",templateUrl:"views/guide/guide.html",controller:"guideController"}).state("tab",{url:"/tab",abstract:!0,templateUrl:"views/tabs.html",controller:"TabsController"}).state("tab.home",{url:"/home",views:{"tab-home":{templateUrl:"views/tabs/tab-home.html",controller:"HomeController"}}}).state("tab.good-detail",{url:"/good-detail:id",views:{"tab-home":{templateUrl:"views/detail/good.html",controller:"GoodDetailController"}}}).state("tab.home-web",{url:"/web:url",views:{"tab-home":{templateUrl:"views/public/web.html",controller:"WebController"}}}).state("tab.destination",{url:"/destination",views:{"tab-destination":{templateUrl:"views/tabs/tab-destination.html",controller:"DestinationController"}}}).state("tab.destination-web",{url:"/web:url",views:{"tab-destination":{templateUrl:"views/public/web.html",controller:"WebController"}}}).state("tab.buy",{url:"/buy",views:{"tab-buy":{templateUrl:"views/tabs/tab-buy.html",controller:"BuyController"}}}).state("tab.buy-web",{url:"/web:url:title",views:{"tab-buy":{templateUrl:"views/public/web.html",controller:"WebController"}}}).state("tab.account",{url:"/me",views:{"tab-me":{templateUrl:"views/tabs/tab-me.html",controller:"MeController"}}}).state("tab.me-web",{url:"/web:url",views:{"tab-me":{templateUrl:"views/public/web.html",controller:"WebController"}}}),e.otherwise(localStorage.guided?"/tab/home":"/guide")}]),angular.module("Chufaba").controller("TabsController",["$scope","$rootScope","$ionicTabsDelegate","$ionicModal",function(t,e,o,a){var n={"tab.home":{tab:!0,navStyle:!1},"tab.good-detail":{tab:!1,navStyle:!0},"tab.home-web":{tab:!1,navStyle:!1},"tab.destination":{tab:!0,navStyle:!1},"tab.destination-web":{tab:!1,navStyle:!1},"tab.buy":{tab:!0,navStyle:!1},"tab.buy-web":{tab:!1,navStyle:!1},"tab.me":{tab:!0,navStyle:!1},"tab.me-web":{tab:!1,navStyle:!1}};e.$on("$ionicView.beforeEnter",function(t,e){n[e.stateName]&&o.showBar(n[e.stateName].tab);var a=$(".bar-stable.bar.bar-header");n[e.stateName]&&n[e.stateName].navStyle?a.css("background","none"):a.css("background","#21272f")}),e.$on("$ionicView.beforeLeave",function(t,e){}),a.fromTemplateUrl("login.html",{scope:t}).then(function(e){t.loginModal=e})}]),angular.module("Chufaba").controller("GoodDetailController",["$scope","$stateParams","$ionicLoading","$http",function(t,e,o,a){function n(e){$(".bar-stable.bar.bar-header").css("background","rgba(33,39,47,"+e+")"),t.navOpacity=e}var r=window.innerHeight;t.navOpacity=0,t.topImageSize=function(){var e=document.querySelector("#good-detail .scroll").style.transform,o=Number(e.split(", ")[1].replace("px",""));o>=0&&$(".back-image").css("transform","scale("+(o/300+1)+")");var a=Math.abs(o),i=0;i=a>.3*r?(a-.3*r)/100:0,t.navOpacity!=i&&n(i)};var i=function t(e){var o=e.path,a=void 0===o?"/product":o,n=e.id,r=void 0===n?0:n,i=e.loadData,l=void 0===i?function(){}:i;_classCallCheck(this,t),this.path=a,this.id=r,this.loadData=l};t.detail=new i({path:"/product/good-detail",id:e.id,loadData:function(){var t=this;a({method:"GET",url:config.serverUrl+this.path,params:{id:this.id}}).then(function(e){e.data.code?t.data=e.data.detailData:$cordovaToast.showShortCenter("数据请求失败"),setTimeout(function(){o.hide()},1e3)}).catch(function(t){$cordovaToast.showShortCenter("数据请求失败，请检查网络"),setTimeout(function(){o.hide()},1e3)})}}),t.$on("$ionicView.loaded",function(){o.show()}),t.$on("$ionicView.afterEnter",function(){t.detail.loadData()})}]),angular.module("Chufaba").controller("guideController",["$scope","$ionicPlatform","$state","$timeout",function(t,e,o,a){t.index=0,t.slideStatus=[!0,!1,!1],t.delay=!0,t.changeBC=function(e){t.index=e,t.delay=!1,t.slideStatus[e]=!0},t.go=function(){t.out=!0,a(function(){o.go("tab.home")},1e3)}}]),angular.module("Chufaba").controller("loginModelController",["$scope",function(t){t.isRegister=!1,t.toLogin=function(e){t.isRegister=!1},t.toRegister=function(e){t.isRegister=!0}}]).controller("formController",["$scope",function(t){}]),angular.module("Chufaba").controller("WebController",["$scope","$stateParams","$sce","$ionicLoading",function(t,e,o,a){t.title=e.title,document.getElementById("iframe").onload=function(){a.hide()},t.$on("$ionicView.loaded",function(){a.show(),setTimeout(function(){a.hide()},3e3)}),t.$on("$ionicView.afterEnter",function(){t.targetUrl=o.trustAsResourceUrl(e.url)})}]),angular.module("Chufaba").controller("BuyController",["$scope","$http","$cordovaToast",function(t,e,o){t.data=[1,2,3,4],t.market=new RefreshComponent({scope:t,path:"/product/market",offset:0,hasInfinite:!0,data:{},reset:function(){this.data={}},loadData:function(){var a=this;e({method:"GET",url:config.serverUrl+this.path}).then(function(e){"ok"==e.data.code?(console.log(e.data),a.data=e.data.marketData,console.log(t.market.data)):o.showShortCenter("数据请求失败，请尝试下拉刷新"),a.showInfinite=!1,t.$broadcast("scroll.infiniteScrollComplete")}).catch(function(t){o.showShortCenter("数据请求失败，请检查网络")})}})}]),angular.module("Chufaba").controller("DestinationController",["$scope",function(t){t.data=[1,2,3,4]}]);var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,o,a){return o&&t(e.prototype,o),a&&t(e,a),e}}();angular.module("Chufaba").controller("HomeController",["$scope","$ionicSlideBoxDelegate","$cordovaToast","$http","$state",function(t,e,o,a,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.activeItem=e}return _createClass(t,[{key:"setActive",value:function(t){this.activeItem=t,e.slide(this.activeItem)}}]),t}();t.homeTab=new r(1),t.good=new RefreshComponent({scope:t,path:"/product/good-list",data:{items:[]},reset:function(){this.data.items.length=0},loadData:function(){var e=this;a({method:"GET",url:config.serverUrl+this.path,params:{current:this.current,offset:this.offset}}).then(function(a){"ok"==a.data.code&&a.data.items.length>0?(e.data.items=e.data.items.concat(a.data.items),e.current+=e.offset):"ok"==a.data.code&&0===a.data.items.length?(e.showInfinite=!1,o.showShortCenter("没有更多数据了!")):o.showShortCenter("数据请求失败，请尝试下拉刷新"),t.$broadcast("scroll.infiniteScrollComplete")}).catch(function(t){o.showShortCenter("数据请求失败，请检查网络")})}}),t.good.data.banner={image:config.activityPoster}}]).service("HomeService",[]),angular.module("Chufaba").controller("MeController",["$scope",function(t){}]);
//# sourceMappingURL=ionic.app.min.js.map
